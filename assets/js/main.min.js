!function(a){"use strict";var b=function(){0!==a(".sidebars-column-2").length?this.widget_wrap=a(".sidebars-column-2"):this.widget_wrap=a(".sidebars-column-1"),this.widget_area=a("#widgets-right"),this.parent_area=a(".widget-liquid-right"),this.widget_template=a("#pluton-add-widget-template"),this.add_form_html(),this.add_del_button(),this.bind_events()};b.prototype={add_form_html:function(){this.widget_wrap.append(this.widget_template.html()),this.widget_name=this.widget_wrap.find('input[name="pluton-add-widget-input"]'),this.nonce=this.widget_wrap.find('input[name="pluton-nonce"]').val()},add_del_button:function(){var b=0;this.widget_area.find(".sidebar-pluton-custom .widgets-sortables").each(function(){if(b>=plutonWidgetAreasLocalize.count){var c=a(this).attr("id");a(this).append('<div class="pluton-widget-area-footer"><div class="pluton-widget-area-id">ID:<span class="description"> '+c+'</span></div><div class="pluton-widget-area-buttons"><a href="#" class="pluton-widget-area-delete button-primary">'+plutonWidgetAreasLocalize["delete"]+'</a><a href="#" class="pluton-widget-area-delete-cancel button-secondary">'+plutonWidgetAreasLocalize.cancel+'</a><a href="#" class="pluton-widget-area-delete-confirm button-primary">'+plutonWidgetAreasLocalize.confirm+"</a></div></div>")}b++})},bind_events:function(){this.parent_area.on("click","a.pluton-widget-area-delete",function(b){b.preventDefault(),a(this).hide(),a(this).next("a.pluton-widget-area-delete-cancel").show().next("a.pluton-widget-area-delete-confirm").show()}),this.parent_area.on("click","a.pluton-widget-area-delete-cancel",function(b){b.preventDefault(),a(this).hide(),a(this).prev("a.pluton-widget-area-delete").show(),a(this).next("a.pluton-widget-area-delete-confirm").hide()}),this.parent_area.on("click","a.pluton-widget-area-delete-confirm",a.proxy(this.delete_widget_area,this)),a("#addWidgetAreaForm").submit(function(){a.proxy(this.add_widget_area,this)})},add_widget_area:function(a){return a.preventDefault(),!1},delete_widget_area:function(b){var c=a(b.currentTarget).parents(".widgets-holder-wrap:eq(0)"),d=c.find(".sidebar-name h2"),e=d.find(".spinner"),f=a.trim(d.text()),g=this;c.addClass("closed"),e.css("display","inline-block"),a.ajax({type:"POST",url:window.ajaxurl,data:{action:"pluton_delete_widget_area",name:f,_wpnonce:g.nonce},success:function(a){"widget_area-deleted"==a.trim()&&c.slideUp(200).remove()}})}},a(function(){new b})}(jQuery);